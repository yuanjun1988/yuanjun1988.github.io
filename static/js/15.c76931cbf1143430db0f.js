webpackJsonp([15],{Vx1E:function(e,t){},gq0U:function(e,t,i){"use strict";Object.defineProperty(t,"__esModule",{value:!0});var a=i("mHYM"),l=i("gyMJ"),s=(i("mZiP"),{data:function(){return{dynamicTags:[],inputVisible:!1,inputValue:"",tagIsShow:!0,upCompanyVideoUrl:"",upProductVideoUrl:"",upTeamVideoUrl:"",isNeedCard:"1",isCall:"",partJobwWorkTime:"1",formLabelAlign:{name:"",job:"",edu:"",exp:"",maxsalary:"",minsalary:"",description:"",advantage:"",hy:"",mun:"",adress:["4","54","532"],adressdetail:"",saralymin:"",saralymax:"",partSaraly:"",partBillingCycle:"",salaryForm:"",partIdentity:"",companyVideoUrl:"",productVideoUrl:"",teamVideoUrl:""},sextab:"1",bigdatadic:{},allPositionList:[],optionProps:{value:"id",label:"name",children:"list"},optionCityProps:{value:"id",label:"name",children:"children"},cityOptions:[],positiontype:[{name:"全职",type:"1"},{name:"灵工",type:"2"}],positionTypeStatus:"1",cityInfo:{},indstrylableArr:[],centerDialogVisible:!1,videoPreviewUrl:""}},created:function(){this.bigdatadic=a.a.sessiongetItem("bigdatadic",1),this.getAllPositionList(),this.getAllCity()},methods:{previewVideo:function(e){this.centerDialogVisible=!0,this.videoPreviewUrl=this.$qiniuUpParams_1.url+e},publishPosition:function(){1==this.positionTypeStatus?this.savePositionInfo():this.savePartPositionInfo()},getAllCity:function(){var e=this;Object(l.i)({}).then(function(t){e.cityOptions=t.datas||[]})},handleChange:function(e){var t=this.$refs.cascaderAddr.getCheckedNodes()[0].pathLabels;this.cityInfo={provinceid:e[0],provinceName:t[0],cityid:e[1],cityBody:t[1],threeCityid:e[2],threeCityBody:t[2]}},savePositionInfo:function(){var e=this,t=[];""!=this.upCompanyVideoUrl&&t.push({videoName:"",videoType:"0",videoUrl:this.upCompanyVideoUrl}),""!=this.upTeamVideoUrl&&t.push({videoName:"",videoType:"1",videoUrl:this.upTeamVideoUrl}),""!=this.upProductVideoUrl&&t.push({videoName:"",videoType:"2",videoUrl:this.upProductVideoUrl});var i={cid:a.a.sessiongetItem("companyInfo",1).comId,name:this.formLabelAlign.name,job:this.formLabelAlign.job[1],jobBody:this.indstrylableArr[1],edu:this.selectSplit(this.formLabelAlign.edu)[0],eduBody:this.selectSplit(this.formLabelAlign.edu)[1],exp:this.selectSplit(this.formLabelAlign.exp)[0],expBody:this.selectSplit(this.formLabelAlign.exp)[1],maxsalary:this.selectSplit(this.formLabelAlign.maxsalary)[0],maxsalaryBody:this.selectSplit(this.formLabelAlign.maxsalary)[1],minsalaryBody:this.selectSplit(this.formLabelAlign.minsalary)[1],minsalary:this.selectSplit(this.formLabelAlign.minsalary)[0],description:this.formLabelAlign.description,advantage:this.formLabelAlign.advantage,ability:this.dynamicTags,provinceid:this.cityInfo.provinceid,province:this.cityInfo.provinceName,cityid:this.cityInfo.cityid,cityName:this.cityInfo.cityBody,threeCityid:this.cityInfo.threeCityid,threeCityName:this.cityInfo.threeCityBody,fullAddress:this.formLabelAlign.adressdetail,videos:t};Object(l.D)(i).then(function(t){0==t.resp_code&&(e.$message({message:"职位成功发布",type:"success"}),e.$router.push({path:"/position/positionmanage",query:{type:1}}))})},savePartPositionInfo:function(){var e=this,t=[];""!=this.upCompanyVideoUrl&&t.push({videoName:"",videoType:"0",videoUrl:this.upCompanyVideoUrl}),""!=this.upTeamVideoUrl&&t.push({videoName:"",videoType:"1",videoUrl:this.upTeamVideoUrl}),""!=this.upProductVideoUrl&&t.push({videoName:"",videoType:"2",videoUrl:this.upProductVideoUrl});var i={cid:a.a.sessiongetItem("companyInfo",1).comId,name:this.formLabelAlign.name,nameDicId:this.formLabelAlign.job[1],nameDicName:this.indstrylableArr[1],eduDicId:this.selectSplit(this.formLabelAlign.edu)[0],expDicId:this.selectSplit(this.formLabelAlign.exp)[0],expDicName:this.selectSplit(this.formLabelAlign.exp)[1],eduDicName:this.selectSplit(this.formLabelAlign.edu)[1],salary:this.formLabelAlign.partSaraly,salaryFormDicId:this.selectSplit(this.formLabelAlign.salaryForm)[0],salaryFormDicName:this.selectSplit(this.formLabelAlign.salaryForm)[1],salaryTypeDicId:this.selectSplit(this.formLabelAlign.partBillingCycle)[0],salaryTypeDicName:this.selectSplit(this.formLabelAlign.partBillingCycle)[1],workDesc:this.formLabelAlign.description,skillLabelList:this.dynamicTags,workDateTypeDicId:1==this.partJobwWorkTime?"43":"42",workDateTypeDicName:1==this.partJobwWorkTime?"长期":"短期",isHealth:1==this.isNeedCard?"Y":"N",isContact:this.isCall,threeCityDicId:this.cityInfo.threeCityid,threeCityDicName:this.cityInfo.threeCityBody,provinceDicId:this.cityInfo.provinceid,provinceDicName:this.cityInfo.provinceName,cityDicId:this.cityInfo.cityid,cityDicName:this.cityInfo.cityBody,identityDicId:this.selectSplit(this.formLabelAlign.partIdentity)[0],identityDicName:this.selectSplit(this.formLabelAlign.partIdentity)[1],address:this.formLabelAlign.adressdetail,videos:t};Object(l.C)(i).then(function(t){0==t.resp_code&&(e.$message({message:"职位成功发布",type:"success"}),e.$router.push({path:"/position/positionmanage",query:{type:2}}))})},getAllPositionList:function(){var e=this;Object(l.j)({}).then(function(t){e.allPositionList=t.datas||[]})},handleClose:function(e){this.dynamicTags.splice(this.dynamicTags.indexOf(e),1)},showInput:function(){var e=this;this.inputVisible=!0,this.$nextTick(function(t){e.$refs.saveTagInput.$refs.input.focus()})},handleInputConfirm:function(){var e=this.inputValue,t={name:e};e&&this.dynamicTags.push(t),this.inputVisible=!1,this.inputValue=""},uploadComVideo:function(e){var t=e.target.files;2==a.a.fileJudgeType(t)?this.uploadFunc(e,1):this.$message({message:"只能上传视频",type:"warning"})},uploadCertificate:function(e){var t=e.target.files;2==a.a.fileJudgeType(t)?this.uploadFunc(e,2):this.$message({message:"只能上传视频",type:"warning"})},uploadproductVideo:function(e){var t=e.target.files;2==a.a.fileJudgeType(t)?this.uploadFunc(e,3):this.$message({message:"只能上传视频",type:"warning"})},uploadFunc:function(e,t){var i=this;this.uploadQiniu(e,1).then(function(e){1==t?(i.formLabelAlign.companyVideoUrl=i.$qiniuUpParams_1.url+e.key+"?vframe/jpg/offset/0",i.upCompanyVideoUrl=e.key):2==t?(i.formLabelAlign.teamVideoUrl=i.$qiniuUpParams_1.url+e.key+"?vframe/jpg/offset/0",i.upTeamVideoUrl=e.key):3==t&&(i.formLabelAlign.productVideoUrl=i.$qiniuUpParams_1.url+e.key+"?vframe/jpg/offset/0",i.upProductVideoUrl=e.key)})},handleChangePosition:function(e){this.indstrylableArr=this.$refs.cascaderPositionAddr.getCheckedNodes()[0].pathLabels,this.formLabelAlign.name=this.indstrylableArr[1]}},watch:{dynamicTags:function(){5==this.dynamicTags.length&&(this.tagIsShow=!1,this.$message({message:"最多5个标签",type:"warning"}))}}}),o={render:function(){var e=this,t=e.$createElement,a=e._self._c||t;return a("div",{staticClass:"main"},[a("div",{staticClass:"main_con"},[a("div",{staticClass:"posiiton_tab"},[a("el-breadcrumb",{attrs:{"separator-class":"el-icon-arrow-right"}},[a("el-breadcrumb-item",{attrs:{to:{path:"/position/positionmanage"}}},[e._v("职位管理")]),e._v(" "),a("el-breadcrumb-item",[e._v("发布职位")])],1)],1),e._v(" "),a("div",{staticClass:"position_section"},[a("el-form",{staticClass:"el-form",attrs:{"label-width":"170px",model:e.formLabelAlign}},[a("el-form-item",{attrs:{required:"",label:"选择用工形式："}},[a("el-select",{attrs:{placeholder:"请选择"},model:{value:e.positionTypeStatus,callback:function(t){e.positionTypeStatus=t},expression:"positionTypeStatus"}},e._l(e.positiontype,function(e){return a("el-option",{key:e.type,attrs:{label:e.name,value:e.type}})}),1)],1),e._v(" "),a("el-form-item",{attrs:{required:"",label:"职位："}},[a("el-cascader",{ref:"cascaderPositionAddr",attrs:{options:e.allPositionList,props:e.optionProps,clearable:""},on:{change:e.handleChangePosition},model:{value:e.formLabelAlign.job,callback:function(t){e.$set(e.formLabelAlign,"job",t)},expression:"formLabelAlign.job"}})],1),e._v(" "),a("el-form-item",{attrs:{required:"",label:"职位名称："}},[a("el-input",{attrs:{placeholder:"单行输入"},model:{value:e.formLabelAlign.name,callback:function(t){e.$set(e.formLabelAlign,"name",t)},expression:"formLabelAlign.name"}})],1),e._v(" "),a("el-form-item",{attrs:{label:"工作经验："}},[a("el-select",{attrs:{placeholder:"请选择"},model:{value:e.formLabelAlign.exp,callback:function(t){e.$set(e.formLabelAlign,"exp",t)},expression:"formLabelAlign.exp"}},e._l(e.bigdatadic.workYears,function(e){return a("el-option",{key:e.id,attrs:{label:e.name,value:e.id+"|"+e.name}})}),1)],1),e._v(" "),a("el-form-item",{attrs:{label:"学历要求："}},[a("el-select",{attrs:{placeholder:"无限制"},model:{value:e.formLabelAlign.edu,callback:function(t){e.$set(e.formLabelAlign,"edu",t)},expression:"formLabelAlign.edu"}},e._l(e.bigdatadic.diploma,function(e){return a("el-option",{key:e.id,attrs:{label:e.name,value:e.id+"|"+e.name}})}),1)],1),e._v(" "),2==e.positionTypeStatus?a("el-form-item",{attrs:{label:"身份要求："}},[a("el-select",{attrs:{placeholder:"无限制"},model:{value:e.formLabelAlign.partIdentity,callback:function(t){e.$set(e.formLabelAlign,"partIdentity",t)},expression:"formLabelAlign.partIdentity"}},e._l(e.bigdatadic.partIdentityTypeList,function(e){return a("el-option",{key:e.id,attrs:{label:e.name,value:e.id+"|"+e.name}})}),1)],1):e._e(),e._v(" "),a("div",{staticClass:"skill_item"},[a("div",{staticClass:"skill_title"},[a("span",[e._v("技能要求：")]),e._v(" "),a("span",[e._v("选择技能标签（0/5）")])]),e._v(" "),a("div",{staticClass:"skill_tab"},[e._l(e.dynamicTags,function(t){return a("el-tag",{key:t.name,attrs:{closable:"","disable-transitions":!1},on:{close:function(i){return e.handleClose(t)}}},[e._v("\n                      "+e._s(t.name)+"\n                      ")])}),e._v(" "),e.inputVisible?a("el-input",{ref:"saveTagInput",staticClass:"input-new-tag",attrs:{size:"small",maxlength:"6"},on:{blur:e.handleInputConfirm},nativeOn:{keyup:function(t){return!t.type.indexOf("key")&&e._k(t.keyCode,"enter",13,t.key,"Enter")?null:e.handleInputConfirm(t)}},model:{value:e.inputValue,callback:function(t){e.inputValue=t},expression:"inputValue"}}):a("el-button",{staticClass:"button-new-tag",attrs:{size:"small"},on:{click:e.showInput}},[e._v("+ 自定义")])],2)]),e._v(" "),2==e.positionTypeStatus?a("el-form-item",{attrs:{required:"",label:"是否需要健康证："}},[a("el-radio",{attrs:{label:"1"},model:{value:e.isNeedCard,callback:function(t){e.isNeedCard=t},expression:"isNeedCard"}},[e._v("是")]),e._v(" "),a("el-radio",{attrs:{label:"2"},model:{value:e.isNeedCard,callback:function(t){e.isNeedCard=t},expression:"isNeedCard"}},[e._v("否")])],1):e._e(),e._v(" "),2==e.positionTypeStatus?a("el-form-item",{attrs:{required:"",label:"职位薪资："}},[a("div",{staticClass:"saraly_item"},[a("el-input",{attrs:{placeholder:"请输入薪资"},model:{value:e.formLabelAlign.partSaraly,callback:function(t){e.$set(e.formLabelAlign,"partSaraly",t)},expression:"formLabelAlign.partSaraly"}}),e._v(" "),a("el-select",{staticClass:"select_item",attrs:{"el-select":"",clearable:"",placeholder:"不限"},model:{value:e.formLabelAlign.salaryForm,callback:function(t){e.$set(e.formLabelAlign,"salaryForm",t)},expression:"formLabelAlign.salaryForm"}},e._l(e.bigdatadic.partSalaryTypeList,function(e){return a("el-option",{key:e.id,attrs:{label:e.name,value:e.id+"|"+e.name}})}),1)],1)]):a("el-form-item",{attrs:{label:"职位月薪："}},[a("div",{staticClass:"saraly_item"},[a("el-select",{staticClass:"select_item",attrs:{"el-select":"",clearable:"",placeholder:"不限"},model:{value:e.formLabelAlign.minsalary,callback:function(t){e.$set(e.formLabelAlign,"minsalary",t)},expression:"formLabelAlign.minsalary"}},e._l(e.bigdatadic.saraly,function(e){return a("el-option",{key:e.id,attrs:{label:e.name,value:e.id+"|"+e.name}})}),1),e._v(" "),a("span",[e._v("\n                          至\n                      ")]),e._v(" "),a("el-select",{staticClass:"select_item",attrs:{clearable:"",placeholder:"不限"},model:{value:e.formLabelAlign.maxsalary,callback:function(t){e.$set(e.formLabelAlign,"maxsalary",t)},expression:"formLabelAlign.maxsalary"}},e._l(e.bigdatadic.saraly,function(e){return a("el-option",{key:e.id,attrs:{label:e.name,value:e.id+"|"+e.name}})}),1)],1)]),e._v(" "),2==e.positionTypeStatus?a("el-form-item",{attrs:{label:"结算方式："}},[a("el-select",{attrs:{placeholder:"请选择"},model:{value:e.formLabelAlign.partBillingCycle,callback:function(t){e.$set(e.formLabelAlign,"partBillingCycle",t)},expression:"formLabelAlign.partBillingCycle"}},e._l(e.bigdatadic.partBillingCycleList,function(e){return a("el-option",{key:e.id,attrs:{label:e.name,value:e.id+"|"+e.name}})}),1)],1):e._e(),e._v(" "),a("el-form-item",{attrs:{label:"职位描述："}},[a("el-input",{attrs:{type:"textarea",placeholder:"请输入内容",maxlength:"5000","show-word-limit":"",rows:"8"},model:{value:e.formLabelAlign.description,callback:function(t){e.$set(e.formLabelAlign,"description",t)},expression:"formLabelAlign.description"}})],1),e._v(" "),1==e.positionTypeStatus?a("el-form-item",{attrs:{label:"职位优势："}},[a("el-input",{attrs:{type:"textarea",placeholder:"请输入内容",maxlength:"100","show-word-limit":"",rows:"4"},model:{value:e.formLabelAlign.advantage,callback:function(t){e.$set(e.formLabelAlign,"advantage",t)},expression:"formLabelAlign.advantage"}})],1):e._e(),e._v(" "),2==e.positionTypeStatus?a("el-form-item",{attrs:{required:"",label:"工作时间："}},[a("el-radio",{attrs:{label:"1"},model:{value:e.partJobwWorkTime,callback:function(t){e.partJobwWorkTime=t},expression:"partJobwWorkTime"}},[e._v("长期")]),e._v(" "),a("el-radio",{attrs:{label:"2"},model:{value:e.partJobwWorkTime,callback:function(t){e.partJobwWorkTime=t},expression:"partJobwWorkTime"}},[e._v("短期")])],1):e._e(),e._v(" "),a("el-form-item",{attrs:{label:"企业地址："}},[a("el-cascader",{ref:"cascaderAddr",attrs:{options:e.cityOptions,props:e.optionCityProps,emitPath:""},on:{change:e.handleChange},model:{value:e.formLabelAlign.adress,callback:function(t){e.$set(e.formLabelAlign,"adress",t)},expression:"formLabelAlign.adress"}})],1),e._v(" "),a("el-form-item",{attrs:{label:""}},[a("el-input",{attrs:{placeholder:"填写详细地址：如单元门牌号"},model:{value:e.formLabelAlign.adressdetail,callback:function(t){e.$set(e.formLabelAlign,"adressdetail",t)},expression:"formLabelAlign.adressdetail"}})],1),e._v(" "),2==e.positionTypeStatus?a("el-form-item",{attrs:{required:"",label:"允许求职者主动联系："}},[a("el-radio",{attrs:{label:"Y"},model:{value:e.isCall,callback:function(t){e.isCall=t},expression:"isCall"}},[e._v("是")]),e._v(" "),a("el-radio",{attrs:{label:"N"},model:{value:e.isCall,callback:function(t){e.isCall=t},expression:"isCall"}},[e._v("否")])],1):e._e()],1),e._v(" "),a("div",{staticClass:"update_video"},[a("div",{staticClass:"update_video_item"},[""!=e.formLabelAlign.companyVideoUrl?a("div",{staticClass:"cover-img",style:{background:"url("+e.formLabelAlign.companyVideoUrl+") no-repeat"}},[a("img",{staticClass:"video_btn",attrs:{src:i("PC5q"),alt:""},on:{click:function(t){return t.stopPropagation(),e.previewVideo(e.upCompanyVideoUrl)}}})]):a("div",{staticClass:"cover-img"},[""==e.formLabelAlign.companyVideoUrl?a("img",{staticClass:"add_btn",attrs:{src:i("gCCZ"),alt:""}}):e._e(),e._v(" "),a("label",{staticClass:"updatebtn"},[a("input",{ref:"setvalue",staticClass:"updatebtn",staticStyle:{display:"none"},attrs:{type:"file"},on:{change:e.uploadComVideo}})]),e._v(" "),(e.companyVideoUrl="")?a("div",[e._v("添加视频")]):e._e()]),e._v(" "),a("div",{staticClass:"update_type"},[e._v("\n                          企业环境\n                      ")])]),e._v(" "),a("div",{staticClass:"update_video_item"},[""!=e.formLabelAlign.teamVideoUrl?a("div",{staticClass:"cover-img",style:{background:"url("+e.formLabelAlign.teamVideoUrl+") no-repeat"}},[a("img",{staticClass:"video_btn",attrs:{src:i("PC5q"),alt:""},on:{click:function(t){return t.stopPropagation(),e.previewVideo(e.upTeamVideoUrl)}}})]):a("div",{staticClass:"cover-img"},[""==e.formLabelAlign.teamVideoUrl?a("img",{staticClass:"add_btn",attrs:{src:i("gCCZ"),alt:""}}):e._e(),e._v(" "),a("label",{staticClass:"updatebtn"},[a("input",{ref:"setvalue",staticClass:"updatebtn",staticStyle:{display:"none"},attrs:{type:"file"},on:{change:e.uploadCertificate}})]),e._v(" "),(e.teamVideoUrl="")?a("div",[e._v("添加视频")]):e._e()]),e._v(" "),a("div",{staticClass:"update_type"},[e._v("\n                          团队风采\n                      ")])]),e._v(" "),a("div",{staticClass:"update_video_item"},[""!=e.formLabelAlign.productVideoUrl?a("div",{staticClass:"cover-img",style:{background:"url("+e.formLabelAlign.productVideoUrl+") no-repeat"}},[a("img",{staticClass:"video_btn",attrs:{src:i("PC5q"),alt:""},on:{click:function(t){return t.stopPropagation(),e.previewVideo(e.upProductVideoUrl)}}})]):a("div",{staticClass:"cover-img"},[""==e.formLabelAlign.productVideoUrl?a("img",{staticClass:"add_btn",attrs:{src:i("gCCZ"),alt:""}}):e._e(),e._v(" "),a("label",{staticClass:"updatebtn"},[a("input",{ref:"setvalue",staticClass:"updatebtn",staticStyle:{display:"none"},attrs:{type:"file"},on:{change:e.uploadproductVideo}})]),e._v(" "),(e.teamVideoUrl="")?a("div",[e._v("添加视频")]):e._e()]),e._v(" "),a("div",{staticClass:"update_type"},[e._v("\n                          产品成果\n                      ")])])]),e._v(" "),a("div",{staticClass:"position_bottom"},[a("el-button",{staticClass:"update_btn update_cancel_btn",attrs:{"el-button":""}},[e._v("取消")]),e._v(" "),a("el-button",{staticClass:"update_btn update_save_btn",attrs:{"el-button":""},on:{click:e.publishPosition}},[e._v("保存并发布")])],1)],1)]),e._v(" "),a("el-dialog",{staticClass:"video_preview",attrs:{title:"",visible:e.centerDialogVisible,center:""},on:{"update:visible":function(t){e.centerDialogVisible=t}}},[a("div",{},[a("video",{staticClass:"playitem",attrs:{controls:"",src:e.videoPreviewUrl,autoplay:"autoplay"}})])])],1)},staticRenderFns:[]};var r=i("C7Lr")(s,o,!1,function(e){i("Vx1E")},"data-v-10834a1e",null);t.default=r.exports}});